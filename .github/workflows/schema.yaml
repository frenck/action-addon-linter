---
name: Schema

# yamllint disable-line rule:truthy
on: [push, pull_request]

jobs:
  configuration:
    name: Test generate configuration schema
    runs-on: ubuntu-latest
    steps:
      - name: ⤵️ Check out code from GitHub
        uses: actions/checkout@v2.3.4
      - name: 🚀 Build configuration schema
        run: |
          npx typescript-json-schema \
            --refs \
            --noExtraProps \
            --required \
            --uniqueNames \
            --defaultNumberType integer \
            ./src/config.schema.ts Config \
              > ./src/config.schema.json
  build:
    name: Test generate build schema
    runs-on: ubuntu-latest
    steps:
      - name: ⤵️ Check out code from GitHub
        uses: actions/checkout@v2.3.4
      - name: 🚀 Build build schema
        run: |
          npx typescript-json-schema \
            --refs \
            --noExtraProps \
            --required \
            --uniqueNames \
            --defaultNumberType integer \
            ./src/build.schema.ts Build \
              > ./src/build.schema.json
